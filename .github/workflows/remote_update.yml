# .github/workflows/remote_update.yml
name: ğŸ“ External Triggered Config Update

# á€¡á€•á€¼á€„á€ºá€€ Automation Service (IFTTT) á€€á€”á€± á€¡á€á€»á€€á€ºá€•á€¼á€œá€­á€¯á€€á€ºá€á€¬á€€á€­á€¯ á€œá€€á€ºá€á€¶á€–á€­á€¯á€·
on:
  workflow_dispatch:
    inputs:
      new_content:
        description: 'New content (Encoded string) for config.json'
        required: true
        default: 'No content provided'

jobs:
  update-config-file:
    runs-on: ubuntu-latest
    steps:
      # áá‹ Repo á€€á€­á€¯ á€†á€½á€²á€á€» (Checkout)
      - uses: actions/checkout@v4
      
      # á‚á‹ config.json á€–á€­á€¯á€„á€ºá€¡á€Ÿá€±á€¬á€„á€ºá€¸á€€á€­á€¯ á€–á€»á€€á€ºá€•á€¼á€®á€¸áŠ Telegram á€€á€”á€± á€›á€œá€¬á€á€²á€· á€…á€¬á€á€¬á€¸á€¡á€á€…á€ºá€”á€²á€· á€¡á€…á€¬á€¸á€‘á€­á€¯á€¸ (Overwrite) á€œá€¯á€•á€ºá€™á€šá€ºá‹
      # > á€á€…á€ºá€á€¯á€á€Šá€ºá€¸á€á€¬ á€á€¯á€¶á€¸á€á€¼á€„á€ºá€¸á€–á€¼á€„á€·á€º á€–á€­á€¯á€„á€ºá€á€…á€ºá€á€¯á€œá€¯á€¶á€¸á€€á€­á€¯ á€¡á€…á€¬á€¸á€‘á€­á€¯á€¸á€á€½á€¬á€¸á€•á€«á€™á€Šá€ºá‹
      - name: Overwrite config.json
        # NOTE: á€á€„á€ºá€·á€›á€²á€· config.json á€–á€­á€¯á€„á€ºá€”á€¬á€™á€Šá€ºá€€á€­á€¯ á€™á€¾á€”á€ºá€€á€”á€ºá€…á€½á€¬ á€‘á€Šá€ºá€·á€á€½á€„á€ºá€¸á€•á€±á€¸á€•á€«
        run: echo "${{ github.event.inputs.new_content }}" > config.json
        
      # áƒá‹ á€¡á€œá€­á€¯á€¡á€œá€»á€±á€¬á€€á€º Commit & Push á€œá€¯á€•á€º
      - name: Commit and Push
        uses: stefanzweifel/git-auto-commit-action@v5
        with:
          commit_message: "Mobile JSON Update (Telegram Triggered)"
          # config.json á€–á€­á€¯á€„á€ºá€á€…á€ºá€á€¯á€á€Šá€ºá€¸á€€á€­á€¯á€á€¬ Commit á€œá€¯á€•á€ºá€›á€”á€º
          files: config.json
